{"version":3,"sources":["../../src/directives/NgWidgetContainer.ts"],"names":[],"mappings":"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","file":"NgWidgetContainer.js","sourceRoot":"","sourcesContent":["// tslint:disable:max-line-length\r\n// tslint:disable:quotemark\r\nimport { Component, Directive, ElementRef, Renderer, EventEmitter, ComponentFactoryResolver, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\nimport { INgWidgetConfig, INgWidgetEvent, INgWidgetPosition, INgWidgetSize, INgWidgetContainerRawPosition, INgWidgetDimensions, INgWidgetContainerConfig } from \"../interfaces/INgDraggableWidgetConfig\";\r\nimport { NgWidget } from './NgWidget';\r\nimport { NgWidgetPlaceholder } from '../components/NgWidgetPlaceholder';\r\n\r\n\r\nexport class NgWidgetContainer implements OnInit, DoCheck, OnDestroy {\r\n\t// \tdefault config\r\n\tprivate static CONST_DEFAULT_CONFIG: INgWidgetContainerConfig = {\r\n\t\tmargins: [10],\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tmax_cols: 0,\r\n\t\tmax_rows: 0,\r\n\t\tvisible_cols: 0,\r\n\t\tvisible_rows: 0,\r\n\t\tcol_width: 250,\r\n\t\trow_height: 250,\r\n\t\tcascade: 'left',\r\n\t\tmin_width: 100,\r\n\t\tmin_height: 100,\r\n\t\tfix_to_grid: false,\r\n\t\tauto_style: true,\r\n\t\tauto_resize: false,\r\n\t\tmaintain_ratio: false,\r\n\t\tprefer_new: false,\r\n\t\tzoom_on_drag: false,\r\n\t\tallow_overlap: false,\r\n\t\twidget_width_factor: 0,\r\n\t\twidget_height_factor: 0\r\n\t};\r\n\r\n\t// \tevent Emitters\r\n\t public onDragStart: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onDrag: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onDragStop: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onResizeStart: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onResize: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onResizeStop: EventEmitter<NgWidget> = new EventEmitter<NgWidget>();\r\n\t public onItemChange: EventEmitter<Array<INgWidgetEvent>> = new EventEmitter<Array<INgWidgetEvent>>();\r\n\r\n\t// \tpublic variables\r\n\tpublic colWidth = 250;\r\n\tpublic rowHeight = 250;\r\n\tpublic minCols = 1;\r\n\tpublic minRows = 1;\r\n\tpublic marginTop = 10;\r\n\tpublic marginRight = 10;\r\n\tpublic marginBottom = 10;\r\n\tpublic marginLeft = 10;\r\n\tpublic isDragging = false;\r\n\tpublic isResizing = false;\r\n\tpublic autoStyle = true;\r\n\tpublic resizeEnable = true;\r\n\tpublic dragEnable = true;\r\n\tpublic cascade = 'up';\r\n\tpublic minWidth = 100;\r\n\tpublic minHeight = 100;\r\n\tpublic zIndex = 1;\r\n\tpublic allowOverlap = false;\r\n\tpublic widget_width_factor = 0;\r\n\tpublic widget_height_factor = 0;\r\n\r\n\t// \tprivate variables\r\n\tprivate _items: Array<NgWidget> = [];\r\n\tprivate _draggingItem: NgWidget = null;\r\n\tprivate _resizingItem: NgWidget = null;\r\n\tprivate _resizeDirection: string = null;\r\n\tprivate _itemGrid: { [key: number]: { [key: number]: NgWidget } } = {}; // { 1: { 1: null } };\r\n\tprivate _containerWidth: number;\r\n\tprivate _containerHeight: number;\r\n\tprivate _maxCols = 0;\r\n\tprivate _maxRows = 0;\r\n\tprivate _visibleCols = 0;\r\n\tprivate _visibleRows = 0;\r\n\tprivate _setWidth = 250;\r\n\tprivate _setHeight = 250;\r\n\tprivate _posOffset: INgWidgetContainerRawPosition = null;\r\n\tprivate _adding = false;\r\n\tprivate _placeholderRef: ComponentRef<NgWidgetPlaceholder> = null;\r\n\tprivate _fixToGrid = false;\r\n\tprivate _autoResize = false;\r\n\tprivate _differ: KeyValueDiffer<String,any>;\r\n\tprivate _destroyed = false;\r\n\tprivate _maintainRatio = false;\r\n\tprivate _aspectRatio: number;\r\n\tprivate _preferNew = false;\r\n\tprivate _zoomOnDrag = false;\r\n\tprivate _limitToScreen = false;\r\n\tprivate _curMaxRow = 0;\r\n\tprivate _curMaxCol = 0;\r\n\tprivate _dragReady = false;\r\n\tprivate _resizeReady = false;\r\n\r\n\r\n\tprivate _config = NgWidgetContainer.CONST_DEFAULT_CONFIG;\r\n\r\n\t// \t[ng-widget-container] attribute handler\r\n\tset config(v: INgWidgetContainerConfig) {\r\n\t\tthis.setConfig(v);\r\n\r\n\t\tif (this._differ == null && v != null) {\r\n\t\t\tthis._differ = this._differs.find(this._config).create(null);\r\n\t\t}\r\n\t}\r\n\r\n\t// \tconstructor\r\n\tconstructor(private _differs: KeyValueDiffers,\r\n\t\t\t\tprivate _ngEl: ElementRef,\r\n\t\t\t\tprivate _renderer: Renderer,\r\n\t\t\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\r\n\t\t\t\tprivate _containerRef: ViewContainerRef) {}\r\n\r\n\t// \tpublic methods\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, 'widget-container', true);\r\n\t\tif (this.autoStyle) {\r\n\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'position', 'relative');\r\n\t\t}\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tthis._destroyed = true;\r\n\t}\r\n\r\n\tpublic getConfig(): INgWidgetContainerConfig {\r\n\t\treturn this._config;\r\n\t}\r\n\r\n\tpublic setConfig(config: INgWidgetContainerConfig): void {\r\n\t\tthis._config = config;\r\n\r\n\t\tlet maxColRowChanged = false;\r\n\t\tfor (const x in config) {\r\n\t\t\tif (config.hasOwnProperty(x)) {\r\n\t\t\tconst val = config[x];\r\n\t\t\tconst intVal = !val ? 0 : parseInt(val, 10);\r\n\r\n\t\t\t\tswitch (x) {\r\n\t\t\t\t\tcase 'margins':\r\n\t\t\t\t\t\tthis.setMargins(val);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'col_width':\r\n\t\t\t\t\t\tthis.colWidth = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'row_height':\r\n\t\t\t\t\t\tthis.rowHeight = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'auto_style':\r\n\t\t\t\t\t\tthis.autoStyle = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'auto_resize':\r\n\t\t\t\t\t\tthis._autoResize = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'draggable':\r\n\t\t\t\t\t\tthis.dragEnable = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'resizable':\r\n\t\t\t\t\t\tthis.resizeEnable = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max_rows':\r\n\t\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxRows !== intVal;\r\n\t\t\t\t\t\tthis._maxRows = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max_cols':\r\n\t\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxCols !== intVal;\r\n\t\t\t\t\t\tthis._maxCols = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'visible_rows':\r\n\t\t\t\t\t\tthis._visibleRows = Math.max(intVal, 0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'visible_cols':\r\n\t\t\t\t\t\tthis._visibleCols = Math.max(intVal, 0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min_rows':\r\n\t\t\t\t\t\tthis.minRows = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min_cols':\r\n\t\t\t\t\t\tthis.minCols = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min_height':\r\n\t\t\t\t\t\tthis.minHeight = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min_width':\r\n\t\t\t\t\t\tthis.minWidth = Math.max(intVal, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'zoom_on_drag':\r\n\t\t\t\t\t\tthis._zoomOnDrag = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'cascade':\r\n\t\t\t\t\t\tif (this.cascade !== val) {\r\n\t\t\t\t\t\t\tthis.cascade = val;\r\n\t\t\t\t\t\t\tthis._cascadeGrid();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'fix_to_grid':\r\n\t\t\t\t\t\tthis._fixToGrid = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'maintain_ratio':\r\n\t\t\t\t\t\tthis._maintainRatio = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'prefer_new':\r\n\t\t\t\t\t\tthis._preferNew = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'limit_to_screen':\r\n\t\t\t\t\t\tthis._limitToScreen = !this._autoResize && !!val;\r\n\r\n\t\t\t\t\t\tif (this._limitToScreen) {\r\n\t\t\t\t\t\t\tthis._maxCols = this._getContainerColumns();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'allow_overlap':\r\n\t\t\t\t\t\tthis.allowOverlap = val ? true : false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'widget_width_factor':\r\n\t\t\t\t\t\tthis.widget_width_factor = Math.max(intVal, 0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'widget_height_factor':\r\n\t\t\t\t\t\tthis.widget_height_factor = Math.max(intVal, 0);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._maintainRatio) {\r\n\t\t\tif (this.colWidth && this.rowHeight) {\r\n\t\t\t\tthis._aspectRatio = this.colWidth / this.rowHeight;\r\n\t\t\t} else {\r\n\t\t\t\tthis._maintainRatio = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (maxColRowChanged) {\r\n\t\t\tif (this._maxCols > 0 && this._maxRows > 0) {\t// \tCan't have both, prioritise on cascade\r\n\t\t\t\tswitch (this.cascade) {\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis._maxCols = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._maxRows = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.updatePositionsAfterMaxChange();\r\n\t\t}\r\n\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tconst maxWidth = this._maxCols * this.colWidth;\r\n\t\tconst maxHeight = this._maxRows * this.rowHeight;\r\n\r\n\t\tif (maxWidth > 0 && this.minWidth > maxWidth) this.minWidth = 0.75 * this.colWidth;\r\n\t\tif (maxHeight > 0 && this.minHeight > maxHeight) this.minHeight = 0.75 * this.rowHeight;\r\n\r\n\t\tif (this.minWidth > this.colWidth) this.minCols = Math.max(this.minCols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\tif (this.minHeight > this.rowHeight) this.minRows = Math.max(this.minRows, Math.ceil(this.minHeight / this.rowHeight));\r\n\r\n\t\tif (this._maxCols > 0 && this.minCols > this._maxCols) this.minCols = 1;\r\n\t\tif (this._maxRows > 0 && this.minRows > this._maxRows) this.minRows = 1;\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tfor (const item of this._items) {\r\n\t\t\tthis._removeFromGrid(item);\r\n\t\t\titem.setCascadeMode(this.cascade);\r\n\t\t}\r\n\r\n\t\tfor (const item of this._items) {\r\n\t\t\titem.recalculateSelf();\r\n\t\t\tthis._addToGrid(item);\r\n\t\t}\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._filterGrid();\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic getItemPosition(index: number): INgWidgetPosition {\r\n\t\treturn this._items[index].getWidgetPosition();\r\n\t}\r\n\r\n\tpublic getItemSize(index: number): INgWidgetSize {\r\n\t\treturn this._items[index].getSize();\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tconst changes = this._differ.diff(this._config);\r\n\r\n\t\t\tif (changes != null) {\r\n\t\t\t\tconsole.log('ngDoCheck -> NgWidgetContainer');\r\n\t\t\t\tthis._applyChanges(changes);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setMargins(margins: Array<string>): void {\r\n\t\tthis.marginTop = Math.max(parseInt(margins[0], 10), 0);\r\n\t\tthis.marginRight = margins.length >= 2 ? Math.max(parseInt(margins[1], 10), 0) : this.marginTop;\r\n\t\tthis.marginBottom = margins.length >= 3 ? Math.max(parseInt(margins[2], 10), 0) : this.marginTop;\r\n\t\tthis.marginBottom = margins.length >= 3 ? Math.max(parseInt(margins[2], 10), 0) : this.marginTop;\r\n\t\tthis.marginLeft = margins.length >= 4 ? Math.max(parseInt(margins[3], 10), 0) : this.marginRight;\r\n\t}\r\n\r\n\tpublic enableDrag(): void {\r\n\t\tthis.dragEnable = true;\r\n\t}\r\n\r\n\tpublic disableDrag(): void {\r\n\t\tthis.dragEnable = false;\r\n\t}\r\n\r\n\tpublic enableResize(): void {\r\n\t\tthis.resizeEnable = true;\r\n\t}\r\n\r\n\tpublic disableResize(): void {\r\n\t\tthis.resizeEnable = false;\r\n\t}\r\n\r\n\tpublic addItem(ngItem: NgWidget): void {\r\n\t\tngItem.setCascadeMode(this.cascade);\r\n\r\n\t\tif (!this._preferNew) {\r\n\t\t\tconst newPos = this._fixGridPosition(ngItem.getWidgetPosition(), ngItem.getSize());\r\n\t\t\tngItem.setGridPosition(newPos);\r\n\t\t}\r\n\r\n\t\tthis._items.push(ngItem);\r\n\t\tthis._addToGrid(ngItem);\r\n\r\n\t\tthis._updateSize();\r\n\r\n\t\tngItem.recalculateSelf();\r\n\t\tngItem.onCascadeEvent();\r\n\r\n\t\tthis._emitOnItemChange();\r\n\t}\r\n\r\n\tpublic removeItem(ngItem: NgWidget): void {\r\n\t\tthis._removeFromGrid(ngItem);\r\n\r\n\t\tfor (let x = 0; x < this._items.length; x++) {\r\n\t\t\tif (this._items[x] === ngItem) {\r\n\t\t\t\tthis._items.splice(x, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._destroyed) return;\r\n\t\tif (this.allowOverlap) return;\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\t\tthis._items.forEach((item: NgWidget) => item.recalculateSelf());\r\n\t\tthis._emitOnItemChange();\r\n\t}\r\n\r\n\tpublic updateItem(ngWidget: NgWidget): void {\r\n\t\tthis._removeFromGrid(ngWidget);\r\n\t\tthis._addToGrid(ngWidget);\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\t\tngWidget.onCascadeEvent();\r\n\t}\r\n\r\n\tpublic triggerCascade(): void {\r\n\t\tthis._cascadeGrid(null, null);\r\n\t}\r\n\r\n\tpublic triggerResize(): void {\r\n\t\tthis.resizeEventHandler(null);\r\n\t}\r\n\r\n\tpublic resizeEventHandler(e: any): void {\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tif (this._limitToScreen) {\r\n\t\t\tif (this._maxCols !== this._getContainerColumns()) {\r\n\t\t\t\tthis._maxCols = this._getContainerColumns();\r\n\t\t\t\tthis.updatePositionsAfterMaxChange();\r\n\t\t\t\tthis._cascadeGrid();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._filterGrid();\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic mouseDownEventHandler(e: MouseEvent): void {\r\n\t\tconst mousePos = this._getMousePosition(e);\r\n\t\tconst widget = this._getItemFromPosition(mousePos);\r\n\r\n\t\tif (widget != null) {\r\n\t\t\tif (this.resizeEnable && widget.canResize(e)) {\r\n\t\t\t\tthis._resizeReady = true;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if (this.dragEnable && widget.canDrag(e)) {\r\n\t\t\t\tthis._dragReady = true;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseUpEventHandler(e: any): void {\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._dragStop(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resizeStop(e);\r\n\t\t} else if (this._dragReady || this._resizeReady) {\r\n\t\t\tthis._dragReady = false;\r\n\t\t\tthis._resizeReady = false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseMoveEventHandler(e: any): void {\r\n\t\tif (this._resizeReady) {\r\n\t\t\tthis._resizeStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t} else if (this._dragReady) {\r\n\t\t\tthis._dragStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._drag(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resize(e);\r\n\t\t} else {\r\n\t\t\tconst mousePos = this._getMousePosition(e);\r\n\t\t\tconst item = this._getItemFromPosition(mousePos);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.onMouseMove(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// \tPrivate methods\r\n\tprivate updatePositionsAfterMaxChange(): void {\r\n\t\tfor (const item of this._items) {\r\n\t\t\tconst pos = item.getWidgetPosition();\r\n\t\t\tconst dims = item.getSize();\r\n\r\n\t\t\tif (!this._hasGridCollision(pos, dims) && this._isWithinBounds(pos, dims) && dims.x <= this._maxCols && dims.y <= this._maxRows) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\tif (this._maxCols > 0 && dims.x > this._maxCols) {\r\n\t\t\t\tdims.x = this._maxCols;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t} else if (this._maxRows > 0 && dims.y > this._maxRows) {\r\n\t\t\t\tdims.y = this._maxRows;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t}\r\n\r\n\t\t\tif (this._hasGridCollision(pos, dims) || !this._isWithinBounds(pos, dims)) {\r\n\t\t\t\tconst newPosition = this._fixGridPosition(pos, dims);\r\n\t\t\t\titem.setGridPosition(newPosition);\r\n\t\t\t}\r\n\r\n\t\t\tthis._addToGrid(item);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calculateColWidth(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxCols > 0 || this._visibleCols > 0) {\r\n\t\t\t\tconst maxCols = this._maxCols > 0 ? this._maxCols : this._visibleCols;\r\n\t\t\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\r\n\t\t\t\tlet colWidth: number = Math.floor(maxWidth / maxCols);\r\n\t\t\t\tcolWidth -= (this.marginLeft + this.marginRight);\r\n\t\t\t\tif (colWidth > 0) this.colWidth = colWidth;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.colWidth < this.minWidth || this.minCols > this._config.min_cols) {\r\n\t\t\tthis.minCols = Math.max(this._config.min_cols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calculateRowHeight(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxRows > 0 || this._visibleRows > 0) {\r\n\t\t\t\tconst maxRows = this._maxRows > 0 ? this._maxRows : this._visibleRows;\r\n\t\t\t\tconst maxHeight: number = window.innerHeight - this.marginTop - this.marginBottom;\r\n\r\n\t\t\t\tlet rowHeight: number = Math.max(Math.floor(maxHeight / maxRows), this.minHeight);\r\n\t\t\t\trowHeight -= (this.marginTop + this.marginBottom);\r\n\t\t\t\tif (rowHeight > 0) this.rowHeight = rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.rowHeight < this.minHeight || this.minRows > this._config.min_rows) {\r\n\t\t\tthis.minRows = Math.max(this._config.min_rows, Math.ceil(this.minHeight / this.rowHeight));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _updateRatio(): void {\r\n\t\tif (this._autoResize && this._maintainRatio) {\r\n\t\t\tif (this._maxCols > 0 && this._visibleRows <= 0) {\r\n\t\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t\t} else if (this._maxRows > 0 && this._visibleCols <= 0) {\r\n\t\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t\t} else if (this._maxCols === 0 && this._maxRows === 0) {\r\n\t\t\t\tif (this._visibleCols > 0) {\r\n\t\t\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t\t\t} else if (this._visibleRows > 0) {\r\n\t\t\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): void {\r\n\t\tchanges.forEachAddedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachChangedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachRemovedItem((record: any) => { delete this._config[record.key]; });\r\n\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tprivate _resizeStart(e: any): void {\r\n\t\tif (this.resizeEnable) {\r\n\t\t\tconst mousePos = this._getMousePosition(e);\r\n\t\t\tconst item = this._getItemFromPosition(mousePos);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.startMoving();\r\n\t\t\t\tthis._resizingItem = item;\r\n\t\t\t\tthis._resizeDirection = item.canResize(e);\r\n\t\t\t\tthis._removeFromGrid(item);\r\n\t\t\t\tthis._createPlaceholder(item);\r\n\t\t\t\tthis.isResizing = true;\r\n\t\t\t\tthis._resizeReady = false;\r\n\t\t\t\tthis.onResizeStart.emit(item);\r\n\t\t\t\titem.onResizeStartEvent();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _dragStart(e: any): void {\r\n\t\tif (this.dragEnable) {\r\n\t\t\tconst mousePos = this._getMousePosition(e);\r\n\t\t\tconst item = this._getItemFromPosition(mousePos);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\tconst itemPos = item.getPosition();\r\n\t\t\t\tconst pOffset = { 'left': (mousePos.left - itemPos.left), 'top': (mousePos.top - itemPos.top) };\r\n\t\t\t\titem.setWidgetDragStartPosition(item.getWidgetPosition());\r\n\t\t\t\tconsole.log('_dragStart -> dragStartPosition', item.getWidgetDragStartPosition());\r\n\r\n\t\t\t\titem.startMoving();\r\n\t\t\t\tthis._draggingItem = item;\r\n\t\t\t\tthis._posOffset = pOffset;\r\n\t\t\t\tthis._removeFromGrid(item);\r\n\t\t\t\tthis._createPlaceholder(item);\r\n\t\t\t\tthis.isDragging = true;\r\n\t\t\t\tthis._dragReady = false;\r\n\r\n\t\t\t\tthis.onDragStart.emit(item);\r\n\t\t\t\titem.onDragStartEvent();\r\n\r\n\t\t\t\tif (this._zoomOnDrag) {\r\n\t\t\t\t\tthis._zoomOut();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _zoomOut(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'scale(0.5, 0.5)');\r\n\t}\r\n\r\n\tprivate _resetZoom(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', '');\r\n\t}\r\n\r\n\tprivate _drag(e: any): void {\r\n\t\tif (this.isDragging) {\r\n\t\t\tconsole.log('_drag');\r\n\t\t\tif (window.getSelection) {\r\n\t\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\t\twindow.getSelection().empty();\r\n\t\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\t}\r\n\t\t\t} else if ((<any>document).selection) {\r\n\t\t\t\t(<any>document).selection.empty();\r\n\t\t\t}\r\n\r\n\t\t\tconst mousePos = this._getMousePosition(e);\r\n\t\t\tconst newL = (mousePos.left - this._posOffset.left);\r\n\t\t\tconst newT = (mousePos.top - this._posOffset.top);\r\n\r\n\t\t\tconst itemPos = this._draggingItem.getWidgetPosition();\r\n\t\t\tlet gridPos = this._calculateGridPosition(newL, newT);\r\n\t\t\tconst dims = this._draggingItem.getSize();\r\n\r\n\t\t\tgridPos = this._fixPosToBoundsX(gridPos, dims);\r\n\r\n\t\t\tif (!this._isWithinBoundsY(gridPos, dims)) {\r\n\t\t\t\tgridPos = this._fixPosToBoundsY(gridPos, dims);\r\n\t\t\t}\r\n\r\n\t\t\tif (gridPos.col !== itemPos.col || gridPos.row !== itemPos.row) {\r\n\t\t\t// if (Math.abs(gridPos.col - itemPos.col) > 10 || Math.abs(gridPos.row - itemPos.row) > 10) {\r\n\t\t\t\tconsole.log('_drag', gridPos, itemPos);\r\n\t\t\t\tthis._draggingItem.setGridPosition(gridPos, this._fixToGrid);\r\n\t\t\t\tthis._placeholderRef.instance.setGridPosition(gridPos);\r\n\r\n\t\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\t\tif (Math.abs(gridPos.col - itemPos.col) > 10 || Math.abs(gridPos.row - itemPos.row) > 10) {\r\n\t\t\t\t\t\tconsole.log('_drag fixGridCollision', gridPos, dims);\r\n\t\t\t\t\t\tthis._fixGridCollisions(gridPos, dims);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('_drag cascade', gridPos, dims);\r\n\t\t\t\t\tthis._cascadeGrid(gridPos, dims);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._fixToGrid) {\r\n\t\t\t\tthis._draggingItem.setPosition(newL, newT);\r\n\t\t\t}\r\n\r\n\t\t\tthis.onDrag.emit(this._draggingItem);\r\n\t\t\tthis._draggingItem.onDragEvent();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resize(e: any): void {\r\n\t\tif (this.isResizing) {\r\n\t\t\tif (window.getSelection) {\r\n\t\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\t\twindow.getSelection().empty();\r\n\t\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\t}\r\n\t\t\t} else if ((<any>document).selection) {\r\n\t\t\t\t(<any>document).selection.empty();\r\n\t\t\t}\r\n\r\n\t\t\tconst mousePos = this._getMousePosition(e);\r\n\t\t\tconst itemPos = this._resizingItem.getPosition();\r\n\t\t\tconst itemDims = this._resizingItem.getDimensions();\r\n\t\t\tlet newW = this._resizeDirection === 'height' ? itemDims.width : (mousePos.left - itemPos.left + 10);\r\n\t\t\tlet newH = this._resizeDirection === 'width' ? itemDims.height : (mousePos.top - itemPos.top + 10);\r\n\r\n\t\t\tif (newW < this.minWidth) newW = this.minWidth;\r\n\t\t\tif (newH < this.minHeight) newH = this.minHeight;\r\n\t\t\tif (newW < this._resizingItem.minWidth) newW = this._resizingItem.minWidth;\r\n\t\t\tif (newH < this._resizingItem.minHeight) newH = this._resizingItem.minHeight;\r\n\r\n\t\t\tlet calcSize = this._calculateGridSize(newW, newH);\r\n\t\t\tconst itemSize = this._resizingItem.getSize();\r\n\t\t\tconst iGridPos = this._resizingItem.getWidgetPosition();\r\n\r\n\t\t\tif (!this._isWithinBoundsX(iGridPos, calcSize)) calcSize = this._fixSizeToBoundsX(iGridPos, calcSize);\r\n\r\n\t\t\tif (!this._isWithinBoundsY(iGridPos, calcSize)) calcSize = this._fixSizeToBoundsY(iGridPos, calcSize);\r\n\r\n\t\t\tcalcSize = this._resizingItem.fixResize(calcSize);\r\n\r\n\t\t\tif (calcSize.x !== itemSize.x || calcSize.y !== itemSize.y) {\r\n\t\t\t\tthis._resizingItem.setSize(calcSize, this._fixToGrid);\r\n\t\t\t\tthis._placeholderRef.instance.setSize(calcSize);\r\n\r\n\t\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\t\tthis._fixGridCollisions(iGridPos, calcSize);\r\n\t\t\t\t\tthis._cascadeGrid(iGridPos, calcSize);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._fixToGrid) this._resizingItem.setDimensions(newW, newH);\r\n\r\n\t\t\tconst bigGrid = this._maxGridSize(itemPos.left + newW + (2 * e.movementX), itemPos.top + newH + (2 * e.movementY));\r\n\r\n\t\t\tif (this._resizeDirection === 'height') bigGrid.x = iGridPos.col + itemSize.x;\r\n\t\t\tif (this._resizeDirection === 'width') bigGrid.y = iGridPos.row + itemSize.y;\r\n\r\n\t\t\tthis.onResize.emit(this._resizingItem);\r\n\t\t\tthis._resizingItem.onResizeEvent();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _dragStop(e: any): void {\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis.isDragging = false;\r\n\r\n\t\t\tconst itemPos = this._draggingItem.getWidgetPosition();\r\n\t\t\tconst itemDragStartPos = this._draggingItem.getWidgetDragStartPosition();\r\n\t\t\tconsole.log('_dragStop itemPos, dragStartPos', itemPos, itemDragStartPos);\r\n\t\t\tthis._draggingItem.setGridPosition(itemPos);\r\n\t\t\t// if (this.allowOverlap) {\r\n\t\t\t// \tthis._draggingItem.setGridPosition(itemPos);\r\n\t\t\t// } else {\r\n\t\t\t// \tif (Math.abs(itemPos.row - itemDragStartPos.row) > 4 ) {\r\n\t\t\t// \t\tconsole.log('_dragStop setGrid itemPos');\r\n\t\t\t// \t\tthis._draggingItem.setGridPosition(itemPos);\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tconsole.log('_dragStop setGrid itemDragStartPos');\r\n\t\t\t// \t\tconst newPos: INgWidgetPosition = { col: itemPos.col, row: itemDragStartPos.row };\r\n\t\t\t// \t\tthis._draggingItem.setGridPosition(newPos);\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\tthis._addToGrid(this._draggingItem);\r\n\r\n\t\t\tthis._cascadeGrid();\r\n\t\t\tthis._updateSize();\r\n\t\t\tthis._filterGrid();\r\n\r\n\t\t\tthis._draggingItem.stopMoving();\r\n\t\t\tthis._draggingItem.onDragStopEvent();\r\n\t\t\tthis.onDragStop.emit(this._draggingItem);\r\n\t\t\tthis._draggingItem = null;\r\n\t\t\tthis._posOffset = null;\r\n\t\t\tthis._placeholderRef.destroy();\r\n\r\n\t\t\tthis._emitOnItemChange();\r\n\r\n\t\t\tif (this._zoomOnDrag) {\r\n\t\t\t\tthis._resetZoom();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resizeStop(e: any): void {\r\n\t\tif (this.isResizing) {\r\n\t\t\tthis.isResizing = false;\r\n\r\n\t\t\tconst itemDims = this._resizingItem.getSize();\r\n\r\n\t\t\tthis._resizingItem.setSize(itemDims);\r\n\t\t\tthis._addToGrid(this._resizingItem);\r\n\r\n\t\t\tthis._cascadeGrid();\r\n\t\t\tthis._updateSize();\r\n\t\t\tthis._filterGrid();\r\n\r\n\t\t\tthis._resizingItem.stopMoving();\r\n\t\t\tthis._resizingItem.onResizeStopEvent();\r\n\t\t\tthis.onResizeStop.emit(this._resizingItem);\r\n\t\t\tthis._resizingItem = null;\r\n\t\t\tthis._resizeDirection = null;\r\n\t\t\tthis._placeholderRef.destroy();\r\n\r\n\t\t\tthis._emitOnItemChange();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _maxGridSize(w: number, h: number): INgWidgetSize {\r\n\t\tconst sizex = Math.ceil(w / (this.colWidth + this.marginLeft + this.marginRight));\r\n\t\tconst sizey = Math.ceil(h / (this.rowHeight + this.marginTop + this.marginBottom));\r\n\t\treturn { 'x': sizex, 'y': sizey };\r\n\t}\r\n\r\n\tprivate _calculateGridSize(width: number, height: number): INgWidgetSize {\r\n\t\twidth += this.marginLeft + this.marginRight;\r\n\t\theight += this.marginTop + this.marginBottom;\r\n\r\n\t\tlet sizex = Math.max(this.minCols, Math.round(width / (this.colWidth + this.marginLeft + this.marginRight)));\r\n\t\tlet sizey = Math.max(this.minRows, Math.round(height / (this.rowHeight + this.marginTop + this.marginBottom)));\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizex = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizey = this._maxRows;\r\n\r\n\t\treturn { 'x': sizex, 'y': sizey };\r\n\t}\r\n\r\n\tprivate _calculateGridPosition(left: number, top: number): INgWidgetPosition {\r\n\t\tlet col = Math.max(1, Math.round(left / (this.colWidth + this.marginLeft + this.marginRight)) + 1);\r\n\t\tlet row = Math.max(1, Math.round(top / (this.rowHeight + this.marginTop + this.marginBottom)) + 1);\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: col, row: row }, { x: 1, y: 1 })) col = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: col, row: row }, { x: 1, y: 1 })) row = this._maxRows;\r\n\r\n\t\treturn { 'col': col, 'row': row };\r\n\t}\r\n\r\n\tprivate _hasGridCollision(pos: INgWidgetPosition, dims: INgWidgetSize): boolean {\r\n\t\tconst positions = this._getCollisions(pos, dims);\r\n\r\n\t\tif (positions == null || positions.length === 0) return false;\r\n\r\n\t\treturn positions.some((v: NgWidget) => {\r\n\t\t\treturn !(v === null);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _getCollisions(pos: INgWidgetPosition, dims: INgWidgetSize): Array<NgWidget> {\r\n\t\tconst returns: Array<NgWidget> = [];\r\n\r\n\t\tif(!pos.col) {\r\n\t\t\tpos.col = 1;\r\n\t\t}\r\n\t\tif(!pos.row) {\r\n\t\t\tpos.row = 1;\r\n\t\t}\r\n\r\n\t\tfor (let j = 0; j < dims.y; j++) {\r\n\t\t\tif (this._itemGrid[pos.row + j] != null) {\r\n\t\t\t\tfor (let i = 0; i < dims.x; i++) {\r\n\t\t\t\t\tif (this._itemGrid[pos.row + j][pos.col + i] != null) {\r\n\t\t\t\t\t\tconst item: NgWidget = this._itemGrid[pos.row + j][pos.col + i];\r\n\r\n\t\t\t\t\t\tif (returns.indexOf(item) < 0) returns.push(item);\r\n\r\n\t\t\t\t\t\tconst itemPos: INgWidgetPosition = item.getWidgetPosition();\r\n\t\t\t\t\t\tconst itemDims: INgWidgetSize = item.getSize();\r\n\r\n\t\t\t\t\t\ti = itemPos.col + itemDims.x - pos.col;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn returns;\r\n\t}\r\n\r\n\tprivate _fixGridCollisions(pos: INgWidgetPosition, dims: INgWidgetSize): void {\r\n\t\tif (this.allowOverlap)  return;\r\n\r\n\t\twhile (this._hasGridCollision(pos, dims)) {\r\n\t\t\tconst collisions: Array<NgWidget> = this._getCollisions(pos, dims);\r\n\r\n\t\t\tthis._removeFromGrid(collisions[0]);\r\n\r\n\t\t\tconst itemPos: INgWidgetPosition = collisions[0].getWidgetPosition();\r\n\t\t\tconst itemDims: INgWidgetSize = collisions[0].getSize();\r\n\r\n\t\t\tswitch (this.cascade) {\r\n\t\t\t\tcase 'up':\r\n\t\t\t\tcase 'down':\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconst oldRow: number = itemPos.row;\r\n\t\t\t\t\titemPos.row = pos.row + dims.y;\r\n\r\n\t\t\t\t\tif (!this._isWithinBoundsY(itemPos, itemDims)) {\r\n\t\t\t\t\t\titemPos.col = pos.col + dims.x;\r\n\t\t\t\t\t\titemPos.row = oldRow;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'left':\r\n\t\t\t\tcase 'right':\r\n\t\t\t\t\tconst oldCol: number = itemPos.col;\r\n\t\t\t\t\titemPos.col = pos.col + dims.x;\r\n\r\n\t\t\t\t\tif (!this._isWithinBoundsX(itemPos, itemDims)) {\r\n\t\t\t\t\t\titemPos.col = oldCol;\r\n\t\t\t\t\t\titemPos.row = pos.row + dims.y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tcollisions[0].setGridPosition(itemPos);\r\n\r\n\t\t\tthis._fixGridCollisions(itemPos, itemDims);\r\n\t\t\tthis._addToGrid(collisions[0]);\r\n\t\t\tcollisions[0].onCascadeEvent();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _cascadeGrid(pos?: INgWidgetPosition, dims?: INgWidgetSize): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tif (this.allowOverlap) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos && !dims) throw new Error('Cannot cascade with only position and not dimensions');\r\n\r\n\t\tif (this.isDragging && this._draggingItem && !pos && !dims) {\r\n\t\t\tpos = this._draggingItem.getWidgetPosition();\r\n\t\t\tdims = this._draggingItem.getSize();\r\n\t\t} else if (this.isResizing && this._resizingItem && !pos && !dims) {\r\n\t\t\tpos = this._resizingItem.getWidgetPosition();\r\n\t\t\tdims = this._resizingItem.getSize();\r\n\t\t}\r\n\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'down':\r\n\t\t\t\tconst lowRow: Array<number> = [0];\r\n\r\n\t\t\t\tfor (let i = 1; i <= this._curMaxCol; i++) lowRow[i] = 1;\r\n\r\n\t\t\t\tfor (let r = 1; r <= this._curMaxRow; r++) {\r\n\t\t\t\t\tif (this._itemGrid[r] === undefined) continue;\r\n\r\n\t\t\t\t\tfor (let c = 1; c <= this._curMaxCol; c++) {\r\n\t\t\t\t\t\tif (this._itemGrid[r] === undefined) break;\r\n\t\t\t\t\t\tif (r < lowRow[c]) continue;\r\n\r\n\t\t\t\t\t\tif (this._itemGrid[r][c] != null) {\r\n\t\t\t\t\t\t\tconst item: NgWidget = this._itemGrid[r][c];\r\n\t\t\t\t\t\t\tif (item.isFixed) continue;\r\n\r\n\t\t\t\t\t\t\tconst itemPos: INgWidgetPosition = item.getWidgetPosition();\r\n\t\t\t\t\t\t\tconst itemDims: INgWidgetSize = item.getSize();\r\n\r\n\t\t\t\t\t\t\tif (itemPos.col !== c || itemPos.row !== r) continue;\t// \tif this is not the element's start\r\n\r\n\t\t\t\t\t\t\tlet lowest: number = lowRow[c];\r\n\r\n\t\t\t\t\t\t\tfor (let i = 1; i < itemDims.x; i++) {\r\n\t\t\t\t\t\t\t\tlowest = Math.max(lowRow[(c + i)], lowest);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (pos && (c + itemDims.x) > pos.col && c < (pos.col + dims.x)) {          // \tif our element is in one of the item's columns\r\n\t\t\t\t\t\t\t\tif ((r >= pos.row && r < (pos.row + dims.y)) ||                         // \tif this row is occupied by our element\r\n\t\t\t\t\t\t\t\t\t((itemDims.y > (pos.row - lowest)) &&                               // \tor the item can't fit above our element\r\n\t\t\t\t\t\t\t\t\t\t(r >= (pos.row + dims.y) && lowest < (pos.row + dims.y)))) {    // \tand this row is below our element, but we haven't caught it\r\n\t\t\t\t\t\t\t\t\tlowest = Math.round(Math.max(lowest, pos.row + dims.y));                        // \tset the lowest row to be below it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst newPos: INgWidgetPosition = { col: c, row: lowest };\r\n\r\n\t\t\t\t\t\t\tif (lowest !== itemPos.row && this._isWithinBoundsY(newPos, itemDims)) {\t// \tif the item is not already on this row move it up\r\n\t\t\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < itemDims.x; i++) {\r\n\t\t\t\t\t\t\t\tlowRow[c + i] = lowest + itemDims.y;\t// \tupdate the lowest row to be below the item\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\tconst lowCol: Array<number> = [0];\r\n\r\n\t\t\t\tfor (let i = 1; i <= this._curMaxRow; i++) lowCol[i] = 1;\r\n\r\n\t\t\t\tfor (let r = 1; r <= this._curMaxRow; r++) {\r\n\t\t\t\t\tif (this._itemGrid[r] === undefined) continue;\r\n\r\n\t\t\t\t\tfor (let c = 1; c <= this._curMaxCol; c++) {\r\n\t\t\t\t\t\tif (this._itemGrid[r] === undefined) break;\r\n\t\t\t\t\t\tif (c < lowCol[r]) continue;\r\n\r\n\t\t\t\t\t\tif (this._itemGrid[r][c] != null) {\r\n\t\t\t\t\t\t\tconst item: NgWidget = this._itemGrid[r][c];\r\n\t\t\t\t\t\t\tconst itemDims: INgWidgetSize = item.getSize();\r\n\t\t\t\t\t\t\tconst itemPos: INgWidgetPosition = item.getWidgetPosition();\r\n\r\n\t\t\t\t\t\t\tif (itemPos.col !== c || itemPos.row !== r) continue;\t// \tif this is not the element's start\r\n\r\n\t\t\t\t\t\t\tlet lowest: number = lowCol[r];\r\n\r\n\t\t\t\t\t\t\tfor (let i = 1; i < itemDims.y; i++) {\r\n\t\t\t\t\t\t\t\tlowest = Math.max(lowCol[(r + i)], lowest);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (pos && (r + itemDims.y) > pos.row && r < (pos.row + dims.y)) {          // \tif our element is in one of the item's rows\r\n\t\t\t\t\t\t\t\tif ((c >= pos.col && c < (pos.col + dims.x)) ||                         // \tif this col is occupied by our element\r\n\t\t\t\t\t\t\t\t\t((itemDims.x > (pos.col - lowest)) &&                               // \tor the item can't fit above our element\r\n\t\t\t\t\t\t\t\t\t\t(c >= (pos.col + dims.x) && lowest < (pos.col + dims.x)))) {    // \tand this col is below our element, but we haven't caught it\r\n\t\t\t\t\t\t\t\t\tlowest = Math.max(lowest, pos.col + dims.x);                        // \tset the lowest col to be below it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst newPos: INgWidgetPosition = { col: Math.round(lowest), row: r };\r\n\r\n\t\t\t\t\t\t\t// if (lowest !== itemPos.col && this._isWithinBoundsX(newPos, itemDims)) {\t// \tif the item is not already on this col move it up\r\n\t\t\t\t\t\t\tif (lowest !== itemPos.col && lowest < itemPos.col && this._isWithinBoundsX(newPos, itemDims)) {\t// \tif the item is not already on this col move it up\r\n\t\t\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\t\t\t\t\t\t\t\tconsole.log('_cascadeGrid called setGridPosition', this.cascade, lowest, itemPos, newPos, itemDims);\r\n\r\n\t\t\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < itemDims.y; i++) {\r\n\t\t\t\t\t\t\t\tlowCol[r + i] = lowest + itemDims.x;\t// \tupdate the lowest col to be below the item\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _cascadePlaceHolder(pos?: INgWidgetPosition, dims?: INgWidgetSize): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tif (this.allowOverlap) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (pos && !dims) throw new Error('Cannot cascade with only position and not dimensions');\r\n\r\n\t\tif (this.isDragging && this._draggingItem && !pos && !dims) {\r\n\t\t\tpos = this._draggingItem.getWidgetPosition();\r\n\t\t\tdims = this._draggingItem.getSize();\r\n\t\t} else if (this.isResizing && this._resizingItem && !pos && !dims) {\r\n\t\t\tpos = this._resizingItem.getWidgetPosition();\r\n\t\t\tdims = this._resizingItem.getSize();\r\n\t\t}\r\n\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'down':\r\n\t\t\t\tconst lowRow: Array<number> = [0];\r\n\r\n\t\t\t\tfor (let i = 1; i <= this._curMaxCol; i++) lowRow[i] = 1;\r\n\r\n\t\t\t\tfor (let r = 1; r <= this._curMaxRow; r++) {\r\n\t\t\t\t\tif (this._itemGrid[r] === undefined) continue;\r\n\r\n\t\t\t\t\tfor (let c = 1; c <= this._curMaxCol; c++) {\r\n\t\t\t\t\t\tif (this._itemGrid[r] === undefined) break;\r\n\t\t\t\t\t\tif (r < lowRow[c]) continue;\r\n\r\n\t\t\t\t\t\tif (this._itemGrid[r][c] != null) {\r\n\t\t\t\t\t\t\tconst item: NgWidget = this._itemGrid[r][c];\r\n\t\t\t\t\t\t\tif (item.isFixed) continue;\r\n\r\n\t\t\t\t\t\t\tconst itemPos: INgWidgetPosition = item.getWidgetPosition();\r\n\t\t\t\t\t\t\tconst itemDims: INgWidgetSize = item.getSize();\r\n\r\n\t\t\t\t\t\t\tif (itemPos.col !== c || itemPos.row !== r) continue;\t// \tif this is not the element's start\r\n\r\n\t\t\t\t\t\t\tlet lowest: number = lowRow[c];\r\n\r\n\t\t\t\t\t\t\tfor (let i = 1; i < itemDims.x; i++) {\r\n\t\t\t\t\t\t\t\tlowest = Math.max(lowRow[(c + i)], lowest);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (pos && (c + itemDims.x) > pos.col && c < (pos.col + dims.x)) {          // \tif our element is in one of the item's columns\r\n\t\t\t\t\t\t\t\tif ((r >= pos.row && r < (pos.row + dims.y)) ||                         // \tif this row is occupied by our element\r\n\t\t\t\t\t\t\t\t\t((itemDims.y > (pos.row - lowest)) &&                               // \tor the item can't fit above our element\r\n\t\t\t\t\t\t\t\t\t\t(r >= (pos.row + dims.y) && lowest < (pos.row + dims.y)))) {    // \tand this row is below our element, but we haven't caught it\r\n\t\t\t\t\t\t\t\t\tlowest = Math.max(lowest, pos.row + dims.y);                        // \tset the lowest row to be below it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst newPos: INgWidgetPosition = { col: c, row: lowest };\r\n\r\n\t\t\t\t\t\t\tif (lowest !== itemPos.row && this._isWithinBoundsY(newPos, itemDims)) {\t// \tif the item is not already on this row move it up\r\n\t\t\t\t\t\t\t\t// this._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\t\t\t// item.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\t\t\t// item.onCascadeEvent();\r\n\t\t\t\t\t\t\t\t// this._addToGrid(item);\r\n\t\t\t\t\t\t\t\tthis._placeholderRef.instance.setGridPosition(newPos);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < itemDims.x; i++) {\r\n\t\t\t\t\t\t\t\tlowRow[c + i] = lowest + itemDims.y;\t// \tupdate the lowest row to be below the item\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\tconst lowCol: Array<number> = [0];\r\n\r\n\t\t\t\tfor (let i = 1; i <= this._curMaxRow; i++) lowCol[i] = 1;\r\n\r\n\t\t\t\tfor (let r = 1; r <= this._curMaxRow; r++) {\r\n\t\t\t\t\tif (this._itemGrid[r] === undefined) continue;\r\n\r\n\t\t\t\t\tfor (let c = 1; c <= this._curMaxCol; c++) {\r\n\t\t\t\t\t\tif (this._itemGrid[r] === undefined) break;\r\n\t\t\t\t\t\tif (c < lowCol[r]) continue;\r\n\r\n\t\t\t\t\t\tif (this._itemGrid[r][c] != null) {\r\n\t\t\t\t\t\t\tconst item: NgWidget = this._itemGrid[r][c];\r\n\t\t\t\t\t\t\tconst itemDims: INgWidgetSize = item.getSize();\r\n\t\t\t\t\t\t\tconst itemPos: INgWidgetPosition = item.getWidgetPosition();\r\n\r\n\t\t\t\t\t\t\tif (itemPos.col !== c || itemPos.row !== r) continue;\t// \tif this is not the element's start\r\n\r\n\t\t\t\t\t\t\tlet lowest: number = lowCol[r];\r\n\r\n\t\t\t\t\t\t\tfor (let i = 1; i < itemDims.y; i++) {\r\n\t\t\t\t\t\t\t\tlowest = Math.max(lowCol[(r + i)], lowest);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (pos && (r + itemDims.y) > pos.row && r < (pos.row + dims.y)) {          // \tif our element is in one of the item's rows\r\n\t\t\t\t\t\t\t\tif ((c >= pos.col && c < (pos.col + dims.x)) ||                         // \tif this col is occupied by our element\r\n\t\t\t\t\t\t\t\t\t((itemDims.x > (pos.col - lowest)) &&                               // \tor the item can't fit above our element\r\n\t\t\t\t\t\t\t\t\t\t(c >= (pos.col + dims.x) && lowest < (pos.col + dims.x)))) {    // \tand this col is below our element, but we haven't caught it\r\n\t\t\t\t\t\t\t\t\tlowest = Math.max(lowest, pos.col + dims.x);                        // \tset the lowest col to be below it\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst newPos: INgWidgetPosition = { col: lowest, row: r };\r\n\r\n\t\t\t\t\t\t\tif (lowest !== itemPos.col && lowest < itemPos.col && this._isWithinBoundsX(newPos, itemDims)) {\t// \tif the item is not already on this col move it up\r\n\t\t\t\t\t\t\t\t// this._removeFromGrid(item);\r\n\t\t\t\t\t\t\t\t// console.log('_cascadeGrid called setGridPosition', this.cascade, lowest, itemPos, newPos, itemDims);\r\n\r\n\t\t\t\t\t\t\t\t// item.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\t\t\t// item.onCascadeEvent();\r\n\t\t\t\t\t\t\t\t// this._addToGrid(item);\r\n\t\t\t\t\t\t\t\tthis._placeholderRef.instance.setGridPosition(newPos);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (let i = 0; i < itemDims.y; i++) {\r\n\t\t\t\t\t\t\t\tlowCol[r + i] = lowest + itemDims.x;\t// \tupdate the lowest col to be below the item\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _fixGridPosition(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetPosition {\r\n\t\twhile (this._hasGridCollision(pos, dims) || !this._isWithinBounds(pos, dims)) {\r\n\t\t\tif (this._hasGridCollision(pos, dims)) {\r\n\t\t\t\tconst collisions: NgWidget[] = this._getCollisions(pos, dims);\r\n\r\n\t\t\t\tswitch (this.cascade) {\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tpos.row = Math.max.apply(null, collisions.map((item: NgWidget) => item.row + item.sizey));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tpos.col = Math.max.apply(null, collisions.map((item: NgWidget) => item.col + item.sizex));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\t\tpos.col++;\r\n\t\t\t\tpos.row = 1;\r\n\t\t\t}\r\n\t\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\t\tpos.row++;\r\n\t\t\t\tpos.col = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsX(pos: INgWidgetPosition, dims: INgWidgetSize) {\r\n\t\treturn (this._maxCols === 0 || pos.col === 1 || (pos.col + dims.x - 1) <= this._maxCols);\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsX(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetPosition {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tpos.col = Math.max(this._maxCols - (dims.x - 1), 1);\r\n\t\t\tpos.row ++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsX(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetSize {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tdims.x = Math.max(this._maxCols - (pos.col - 1), 1);\r\n\t\t\tdims.y++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsY(pos: INgWidgetPosition, dims: INgWidgetSize) {\r\n\t\treturn (this._maxRows === 0 || pos.row === 1 || (pos.row + dims.y - 1) <= this._maxRows);\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsY(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetPosition {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tpos.row = Math.max(this._maxRows - (dims.y - 1), 1);\r\n\t\t\tpos.col++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsY(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetSize {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tdims.y = Math.max(this._maxRows - (pos.row - 1), 1);\r\n\t\t\tdims.x++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBounds(pos: INgWidgetPosition, dims: INgWidgetSize) {\r\n\t\treturn this._isWithinBoundsX(pos, dims) && this._isWithinBoundsY(pos, dims);\r\n\t}\r\n\r\n\tprivate _fixPosToBounds(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetPosition {\r\n\t\treturn this._fixPosToBoundsX(this._fixPosToBoundsY(pos, dims), dims);\r\n\t}\r\n\r\n\tprivate _fixSizeToBounds(pos: INgWidgetPosition, dims: INgWidgetSize): INgWidgetSize {\r\n\t\treturn this._fixSizeToBoundsX(pos, this._fixSizeToBoundsY(pos, dims));\r\n\t}\r\n\r\n\tprivate _addToGrid(item: NgWidget): void {\r\n\t\t// if( (this.isDragging || this.isResizing) && this.allowOverlap) {\r\n\t\t// \treturn;\r\n\t\t// }\r\n\t\tlet pos: INgWidgetPosition = item.getWidgetPosition();\r\n\t\tconst dims: INgWidgetSize = item.getSize();\r\n\r\n\t\tif (this._hasGridCollision(pos, dims)) {\r\n\t\t\tthis._fixGridCollisions(pos, dims);\r\n\t\t\tpos = item.getWidgetPosition();\r\n\t\t}\r\n\r\n\t\tfor (let j = 0; j < dims.y; j++) {\r\n\t\t\tif (this._itemGrid[pos.row + j] == null) this._itemGrid[pos.row + j] = {};\r\n\r\n\t\t\tfor (let i = 0; i < dims.x; i++) {\r\n\t\t\t\tthis._itemGrid[pos.row + j][pos.col + i] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _removeFromGrid(item: NgWidget): void {\r\n\t\tfor (const y in this._itemGrid)\r\n\t\t\tfor (const x in this._itemGrid[y])\r\n\t\t\t\tif (this._itemGrid[y][x] === item)\r\n\t\t\t\t\tdelete this._itemGrid[y][x];\r\n\t}\r\n\r\n\tprivate _filterGrid(): void {\r\n\t\t// tslint:disable:forin\r\n\t\tfor (const y in this._itemGrid) {\r\n\t\t\tfor (const x in this._itemGrid[y]) {\r\n\t\t\t\tconst item: NgWidget = this._itemGrid[y][x];\r\n\t\t\t\tconst withinRow = <any>y < (item.row + item.sizey) && <any>y >= item.row;\r\n\t\t\t\tconst withinCol = <any>x < (item.col + item.sizex) && <any>x >= item.col;\r\n\r\n\t\t\t\tif (this._items.indexOf(this._itemGrid[y][x]) < 0 || !withinRow || !withinCol) {\r\n\t\t\t\t\tdelete this._itemGrid[y][x];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (Object.keys(this._itemGrid[y]).length === 0) {\r\n\t\t\t\tdelete this._itemGrid[y];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _updateSize(): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tconst maxCol: number = this._getMaxCol();\r\n\t\tconst maxRow: number = this._getMaxRow();\r\n\r\n\t\tif (maxCol !== this._curMaxCol || maxRow !== this._curMaxRow) {\r\n\t\t\tthis._curMaxCol = maxCol;\r\n\t\t\tthis._curMaxRow = maxRow;\r\n\t\t}\r\n\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'width', '100%'); // (maxCol * (this.colWidth + this.marginLeft + this.marginRight))+'px');\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'height', (maxRow * (this.rowHeight + this.marginTop + this.marginBottom)) + 'px');\r\n\t}\r\n\r\n\tprivate _getMaxRow(): number {\r\n\t\treturn Math.max.apply(null, this._items.map((item: NgWidget) => item.row + item.sizey - 1));\r\n\t}\r\n\r\n\tprivate _getMaxCol(): number {\r\n\t\treturn Math.max.apply(null, this._items.map((item: NgWidget) => item.col + item.sizex - 1));\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): INgWidgetContainerRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\tconst refPos: any = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\tlet left: number = e.clientX - refPos.left;\r\n\t\tlet top: number = e.clientY - refPos.top;\r\n\r\n\t\tif (this.cascade === 'down') top = refPos.top + refPos.height - e.clientY;\r\n\t\tif (this.cascade === 'right') left = refPos.left + refPos.width - e.clientX;\r\n\r\n\t\tif (this.isDragging && this._zoomOnDrag) {\r\n\t\t\tleft *= 2;\r\n\t\t\ttop *= 2;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getAbsoluteMousePosition(e: any): INgWidgetContainerRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX,\r\n\t\t\ttop: e.clientY\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getContainerColumns(): number {\r\n\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\t\treturn Math.floor(maxWidth / (this.colWidth + this.marginLeft + this.marginRight));\r\n\t}\r\n\r\n\tprivate _getContainerRows(): number {\r\n\t\tconst maxHeight: number = window.innerHeight - this.marginTop - this.marginBottom;\r\n\t\treturn Math.floor(maxHeight / (this.rowHeight + this.marginTop + this.marginBottom));\r\n\t}\r\n\r\n\tprivate _getItemFromPosition(position: INgWidgetContainerRawPosition): NgWidget {\r\n\t\tfor (const item of this._items) {\r\n\t\t\tconst size: INgWidgetDimensions = item.getDimensions();\r\n\t\t\tconst pos: INgWidgetContainerRawPosition = item.getPosition();\r\n\r\n\t\t\tif (position.left > (pos.left + this.marginLeft) && position.left < (pos.left + this.marginLeft + size.width) &&\r\n\t\t\t\tposition.top > (pos.top + this.marginTop) && position.top < (pos.top + this.marginTop + size.height)) {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _createPlaceholder(item: NgWidget): void {\r\n\t\tconst pos: INgWidgetPosition = item.getWidgetPosition();\r\n\t\tconst dims: INgWidgetSize = item.getSize();\r\n\r\n\t\tconst factory = this.componentFactoryResolver.resolveComponentFactory(NgWidgetPlaceholder);\r\n\t\tconst componentRef: ComponentRef<NgWidgetPlaceholder> = item.containerRef.createComponent(factory);\r\n\t\tthis._placeholderRef = componentRef;\r\n\t\tconst placeholder: NgWidgetPlaceholder = componentRef.instance;\r\n\t\tplaceholder.registerGrid(this);\r\n\t\tplaceholder.setCascadeMode(this.cascade);\r\n\t\tplaceholder.setGridPosition({ col: pos.col, row: pos.row });\r\n\t\tplaceholder.setSize({ x: dims.x, y: dims.y });\r\n\t}\r\n\r\n\tprivate _emitOnItemChange() {\r\n\t\tthis.onItemChange.emit(this._items.map((item: NgWidget) => item.getEventOutput()));\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n\tselector: '[ngWidgetContainer]',\r\n\tinputs: ['config: ngWidgetContainer'],\r\n\thost: {\r\n\t\t'(mousedown)': 'mouseDownEventHandler($event)',\r\n\t\t'(mousemove)': 'mouseMoveEventHandler($event)',\r\n\t\t'(mouseup)': 'mouseUpEventHandler($event)',\r\n\t\t'(touchstart)': 'mouseDownEventHandler($event)',\r\n\t\t'(touchmove)': 'mouseMoveEventHandler($event)',\r\n\t\t'(touchend)': 'mouseUpEventHandler($event)',\r\n\t\t'(window:resize)': 'resizeEventHandler($event)',\r\n\t\t'(document:mousemove)': 'mouseMoveEventHandler($event)',\r\n\t\t'(document:mouseup)': 'mouseUpEventHandler($event)'\r\n\t}\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: KeyValueDiffers, },\n{type: ElementRef, },\n{type: Renderer, },\n{type: ComponentFactoryResolver, },\n{type: ViewContainerRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'onDragStart': [{ type: Output },],\n'onDrag': [{ type: Output },],\n'onDragStop': [{ type: Output },],\n'onResizeStart': [{ type: Output },],\n'onResize': [{ type: Output },],\n'onResizeStop': [{ type: Output },],\n'onItemChange': [{ type: Output },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}